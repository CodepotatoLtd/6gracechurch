"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.make = void 0;
/**
 * Instantiate a child instance and add to {@link Bud.children} container
 *
 * @remarks
 * **make** takes two parameters:
 *
 * - The **name** of the new compiler
 * - Optional: callback to use for configuration
 *
 * @example
 * ```js
 * bud.make('scripts', async child => child.entry('app', 'app.js'))
 * ```
 *
 * @public
 */
const make = function (name, tap) {
    const root = this;
    root.log(`constructing new instance:`, name);
    root.hooks.action('event.config.after', async (app) => {
        root.children[name] = await root.factory({ name, root });
        if (tap) {
            await tap(root.children[name]);
        }
    });
    return root;
};
exports.make = make;
