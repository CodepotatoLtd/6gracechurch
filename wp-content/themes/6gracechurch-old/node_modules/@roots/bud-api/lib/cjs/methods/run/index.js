"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.run = exports.pathExistsSync = exports.ensureDirSync = void 0;
const bud_support_1 = require("@roots/bud-support");
exports.ensureDirSync = bud_support_1.fs.ensureDirSync, exports.pathExistsSync = bud_support_1.fs.pathExistsSync;
const run = async function () {
    const app = this;
    await app.hooks.fire('event.run');
    const production = async () => {
        const compiler = await app.compiler.compile();
        compiler.run(app.compiler.callback);
    };
    try {
        app.isDevelopment ? await app.server.run() : await production();
    }
    catch (error) {
        app.error(error);
    }
};
exports.run = run;
